<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create Formula — create.formula • formulaic</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create Formula — create.formula" />
<meta property="og:description" content="Create formula is a tool to automatically create a formula object from a provided variable and output names. Reduces the time required to manually input variables for modeling. Output can be used in linear regression, random forest, neural network etc. Create formula becomes useful when modeling data with multiple features. Reduces the time required for modeling and implementation :" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">formulaic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction-to-formulaic.html">Introduction to Formulaic</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dachosen1/formulaic/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create Formula</h1>
    <small class="dont-index">Source: <a href='https://github.com/dachosen1/formulaic/blob/master/R/create.formula.R'><code>R/create.formula.R</code></a></small>
    <div class="hidden name"><code>create.formula.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create formula is a tool to automatically create a formula object from a provided variable and output names. Reduces the time required to manually input variables for modeling. Output can be used in linear regression, random forest, neural network etc. Create formula becomes useful when modeling data with multiple features. Reduces the time required for modeling and implementation :</p>
    </div>

    <pre class="usage"><span class='fu'>create.formula</span>(
  <span class='no'>outcome.name</span>,
  <span class='kw'>input.names</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>input.patterns</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>dat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>interactions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>force.main.effects</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>reduce</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>max.input.categories</span> <span class='kw'>=</span> <span class='fl'>20</span>,
  <span class='kw'>max.outcome.categories.to.search</span> <span class='kw'>=</span> <span class='fl'>4</span>,
  <span class='kw'>order.as</span> <span class='kw'>=</span> <span class='st'>"as.specified"</span>,
  <span class='kw'>include.backtick</span> <span class='kw'>=</span> <span class='st'>"as.needed"</span>,
  <span class='kw'>format.as</span> <span class='kw'>=</span> <span class='st'>"formula"</span>,
  <span class='kw'>variables.to.exclude</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>include.intercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>outcome.name</th>
      <td><p>A character value specifying the name of the formula's outcome variable. In this version, only a single outcome may be ed. The first entry of outcome.name will be used to build the formula.</p></td>
    </tr>
    <tr>
      <th>input.names</th>
      <td><p>The names of the variables with the full names delineated. User can specify '.' or 'all' to e all the column variables.</p></td>
    </tr>
    <tr>
      <th>input.patterns</th>
      <td><p>es additional input variables. The user may enter patterns -- e.g. to e every variable with a name that es the pattern. Multiple patterns may be ed as a character vector. However, each pattern may not contain spaces and is otherwise subject to the same limits on patterns as used in the grep function.</p></td>
    </tr>
    <tr>
      <th>dat</th>
      <td><p>User can specify a data.frame object that will be used to remove any variables that are not listed in names(dat. As default it is set as NULL. In this case, the formula is created simply from the outcome.name and input.names.</p></td>
    </tr>
    <tr>
      <th>interactions</th>
      <td><p>A list of character vectors. Each character vector es the names of the variables that form a single interaction. Specifying interactions = list(c("x", "y"), c("x", "z"), c("y", "z"), c("x", "y", "z")) would lead to the interactions x*y + x*z + y*z + x*y*z.</p></td>
    </tr>
    <tr>
      <th>force.main.effects</th>
      <td><p>This is a logical value. When TRUE, the intent is that any term ed as an interaction (of multiple variables) must also be listed individually as a main effect.</p></td>
    </tr>
    <tr>
      <th>reduce</th>
      <td><p>A logical value. When dat is not NULL and reduce is TRUE, additional quality checks are performed to examine the input variables. Any input variables that exhibit a lack of contrast will be excluded from the model. This search is global by default but may be conducted separately in subsets of the outcome variables by specifying max.outcome.categories.to.search. Additionally, any input variables that exhibit too many contrasts, as defined by max.input.categories, will also be excluded.</p></td>
    </tr>
    <tr>
      <th>max.input.categories</th>
      <td><p>Limits the maximum number of variables that will be employed in the formula. As default it is set at 20, but users can still change at his/her convenience.</p></td>
    </tr>
    <tr>
      <th>max.outcome.categories.to.search</th>
      <td><p>A numeric value. The create.formula function es a feature that identifies input variables exhibiting a lack of contrast. When reduce = TRUE, these variables are automatically excluded from the resulting formula. This search may be expanded to subsets of the outcome when the number of unique measured values of the outcome is no greater than max.outcome.categories.to.search. In this case, each subset of the outcome will be separately examined, and any inputs that exhibit a lack of contrast within at least one subset will be excluded.</p></td>
    </tr>
    <tr>
      <th>order.as</th>
      <td><p>User can specify the order the input variables in the formula in a variety of ways for patterns: increasing for increasing alphabet order, decreasing for decreasing alphabet order, column.order for as they appear in data, and as.specified for maintaining the user's specified order.</p></td>
    </tr>
    <tr>
      <th>include.backtick</th>
      <td><p>Add backticks if needed. As default it is set as 'as.needed', which add backticks when only it is needed. The other option is 'all'. The use of include.backtick = "all" is limited to cases in which the output is generated as a character variable. When the output is generated as a formula object, then R automatically removes all unnecessary backticks. That is, it is only compatible when format.as != formula.</p></td>
    </tr>
    <tr>
      <th>format.as</th>
      <td><p>The data type of the output. If not set as "formula", then a character vector will be returned.</p></td>
    </tr>
    <tr>
      <th>variables.to.exclude</th>
      <td><p>A character vector. Any variable specified in variables.to.exclude will be dropped from the formula, both in the individual inputs and in any associated interactions. This step supersedes the inclusion of any variables specified for inclusion in the other parameters.</p></td>
    </tr>
    <tr>
      <th>include.intercept</th>
      <td><p>A logical value. When FALSE, the intercept will be removed from the formula.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Return as the data type of the output.  If not set as "formula", then a character vector will be returned.
The input.names and names of variables matching the input.patterns will be concatenated to form the full list of input variables.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>10</span>
 <span class='no'>dd</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>data.table</span><span class='kw ns'>::</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></span>(<span class='kw'>w</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span><span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>pixel_1</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>))
 <span class='no'>dd</span>[, <span class='no'>pixel_2</span> <span class='kw'>:=</span> <span class='fl'>0.3</span> * <span class='no'>pixel_1</span> + <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>)]</div><div class='output co'>#&gt;                w           x     pixel_1    pixel_2
#&gt;  1: -1.400043517 -0.55369938  0.46815442  1.0758095
#&gt;  2:  0.255317055  0.62898204  0.36295126  0.2853740
#&gt;  3: -2.437263611  2.06502490 -1.30454355 -0.1476776
#&gt;  4: -0.005571287 -1.63098940  0.73777632  1.8448818
#&gt;  5:  0.621552721  0.51242695  1.88850493  0.6785896
#&gt;  6:  1.148411606 -1.86301149 -0.09744510 -0.1632305
#&gt;  7: -1.821817661 -0.52201251 -0.93584735 -2.1908417
#&gt;  8: -0.247325302 -0.05260191 -0.01595031 -0.2840223
#&gt;  9: -0.244199607  0.54299634 -0.82678895 -0.5614827
#&gt; 10: -0.282705449 -0.91407483 -1.51239965  0.6135880</div><div class='input'> <span class='no'>dd</span>[, <span class='no'>y</span> <span class='kw'>:=</span> <span class='fl'>5</span> * <span class='no'>x</span> + <span class='fl'>3</span> * <span class='no'>pixel_1</span> + <span class='fl'>2</span> * <span class='no'>pixel_2</span> + <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>)]</div><div class='output co'>#&gt;                w           x     pixel_1    pixel_2          y
#&gt;  1: -1.400043517 -0.55369938  0.46815442  1.0758095  0.8576202
#&gt;  2:  0.255317055  0.62898204  0.36295126  0.2853740  4.1653886
#&gt;  3: -2.437263611  2.06502490 -1.30454355 -0.1476776  6.0661737
#&gt;  4: -0.005571287 -1.63098940  0.73777632  1.8448818 -2.5033379
#&gt;  5:  0.621552721  0.51242695  1.88850493  0.6785896 10.0296258
#&gt;  6:  1.148411606 -1.86301149 -0.09744510 -0.1632305 -7.1784363
#&gt;  7: -1.821817661 -0.52201251 -0.93584735 -2.1908417 -9.7527566
#&gt;  8: -0.247325302 -0.05260191 -0.01595031 -0.2840223 -0.3011961
#&gt;  9: -0.244199607  0.54299634 -0.82678895 -0.5614827 -0.7701556
#&gt; 10: -0.282705449 -0.91407483 -1.51239965  0.6135880 -9.7921176</div><div class='input'>
 <span class='fu'>create.formula</span>(<span class='kw'>outcome.name</span> <span class='kw'>=</span> <span class='st'>"y"</span>, <span class='kw'>input.names</span> <span class='kw'>=</span> <span class='st'>"x"</span>, <span class='kw'>input.patterns</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"pi"</span>, <span class='st'>"xel"</span>), <span class='kw'>dat</span> <span class='kw'>=</span> <span class='no'>dd</span>)</div><div class='output co'>#&gt; $formula
#&gt; y ~ x + pixel_1 + pixel_2
#&gt; &lt;environment: 0x0000000025e02e78&gt;
#&gt; 
#&gt; $inclusion.table
#&gt;    variable   class order specified.from exclude.user.specified
#&gt; 1:        x numeric     1    input.names                  FALSE
#&gt; 2:  pixel_1 numeric     2 input.patterns                  FALSE
#&gt; 3:  pixel_2 numeric     3 input.patterns                  FALSE
#&gt;    exclude.not.in.names.dat exclude.matches.outcome.name include.variable
#&gt; 1:                    FALSE                        FALSE             TRUE
#&gt; 2:                    FALSE                        FALSE             TRUE
#&gt; 3:                    FALSE                        FALSE             TRUE
#&gt; 
#&gt; $interactions.table
#&gt; Empty data.table (0 rows and 2 cols): interactions,include.interaction
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Shilane, Caffrey Lee, Zichen Huang, Anderson Nelson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


